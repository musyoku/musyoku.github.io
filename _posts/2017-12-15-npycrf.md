---
layout: post
title:  æ¡ä»¶ä»˜ç¢ºç‡å ´ã¨ãƒ™ã‚¤ã‚ºéšå±¤è¨€èªãƒ¢ãƒ‡ãƒ«ã®çµ±åˆã«ã‚ˆã‚‹åŠæ•™å¸«ã‚ã‚Šå½¢æ…‹ç´ è§£æï¼ˆNPYCRFï¼‰
category: å®Ÿè£…
tags:
- NPYCRF
excerpt_separator: <!--more-->
---

ã“ã®è¨˜äº‹ã¯[è‡ªç„¶è¨€èªå‡¦ç† Advent Calendar 2017](https://qiita.com/advent-calendar/2017/nlp)ã®19æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚

<!--more-->

## ã¯ã˜ã‚ã«

ä»Šå›ã¯åŠæ•™å¸«ã‚ã‚Šå½¢æ…‹ç´ è§£æã®æ‰‹æ³•ã§ã‚ã‚‹NPYCRFã«ã¤ã„ã¦ã€ãã®ç†è«–ã¨å®Ÿè£…æ–¹æ³•ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚

ä¸€èˆ¬ã«å½¢æ…‹ç´ è§£æã¯CRFã«ã‚ˆã‚‹è­˜åˆ¥ãƒ¢ãƒ‡ãƒ«ãŒç”¨ã„ã‚‰ã‚Œã€CRFã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯æ•™å¸«ä»˜ããƒ‡ãƒ¼ã‚¿ã«ã‚ˆã‚Šæœ€é©åŒ–ã•ã‚Œã¾ã™ã€‚

ã—ã‹ã—ã€å¤ãã¯ã—ã‚‡ã“ãŸã‚“ãƒ–ãƒ­ã‚°ã«å§‹ã¾ã‚Šã€æœ€è¿‘ã§ã¯Twitterãªã©ã®ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢ã§æ—¥ã€…æ–°ã—ã„å˜èªãŒç”Ÿã¿å‡ºã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã†ã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’é©åˆ‡ã«è§£æã§ãã‚‹ãƒ¢ãƒ‡ãƒ«ãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚


ï¼ˆä½™è«‡ã§ã™ãŒæœ€è¿‘ã¯å˜èªã‚’çœç•¥ã™ã‚‹ã®ãŒæµè¡Œã£ã¦ã„ã‚‹ã‚‰ã—ãã€ä¾‹ãˆã°ã€Œãƒã‚¤ãƒˆã€ã‚’ã€Œãƒã€ã¨è¨€ã†ãã†ã§ã™ã€‚ä¾‹ï¼‰ã€Œãƒã‚¤ãƒˆçµ‚ã‚ã£ãŸã€â†’ã€ŒãƒãŠã‚ã€ï¼‰


NPYCRFã¯ã€æ•™å¸«ãªã—ãƒ‡ãƒ¼ã‚¿ã®å˜èªåˆ†å‰²ã®ãŸã‚ã®è¨€èªãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹NPYLMã¨ã€å½¢æ…‹ç´ è§£æã®ãŸã‚ã®è­˜åˆ¥ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹CRFã‚’çµ±åˆã—ã€æ•™å¸«ä»˜ããƒ‡ãƒ¼ã‚¿ã®åˆ†å‰²åŸºæº–ã‚’å®ˆã‚ŠãªãŒã‚‰æ•™å¸«ãªã—ãƒ‡ãƒ¼ã‚¿ã®å˜èªåˆ†å‰²ã‚’å­¦ç¿’ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

NPYLMã«åŠ ãˆã¦CRFã¨L-BFGSã‚’å®Ÿè£…ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ãŸã‚ã€å®Ÿè£…é›£æ˜“åº¦ã¯å½“ãƒ–ãƒ­ã‚°å²ä¸Šæœ€é«˜ã¨ãªã£ã¦ã„ã¾ã™ã€‚

æœ€åˆã‹ã‚‰å®Ÿè£…ã™ã‚‹å ´åˆã¯åŠå¹´ã€NPYLMã‚’ãƒ™ãƒ¼ã‚¹ã«å®Ÿè£…ã™ã‚‹å ´åˆã¯2ãƒ¶æœˆç¨‹åº¦ã‹ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ã¾ãŸã€é€šå¸¸ã“ã†ã„ã£ãŸè«–æ–‡ã¯ãƒšãƒ¼ã‚¸æ•°ã®åˆ¶ç´„ãŒã‚ã‚‹ãŸã‚ã€æœ¬å½“ã«ã™ã¹ãã“ã¨ã®1å‰²ç¨‹åº¦ã—ã‹è«–æ–‡ã«æ›¸ã‹ã‚Œã¾ã›ã‚“ã€‚

ã“ã®è¨˜äº‹ã§ã¯ç§ã®è§£é‡ˆã«åŸºã¥ã„ã¦æ®‹ã‚Šã®9å‰²ã®å®Ÿè£…æ–¹æ³•ã‚’èª¬æ˜ã™ã‚‹ãŸã‚ã€èª¤ã‚Šã‚’å«ã‚€å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚

## å‚è€ƒæ–‡çŒ®

å®Ÿè£…ã™ã‚‹ã«ã‚ãŸã‚Šå¿…è¦ãªæ–‡çŒ®ã§ã™ã€‚

- [åŠæ•™å¸«ã‚ã‚Šå½¢æ…‹ç´ è§£æNPYCRFã®ä¿®æ­£](http://www.anlp.jp/proceedings/annual_meeting/2016/pdf_dir/D6-3.pdf)
	- ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆã®NPYCRFã«ã¯ãƒ¢ãƒ‡ãƒ«çµ±åˆéƒ¨åˆ†ã«èª¤ã‚ŠãŒã‚ã‚Šã¾ã™ã€‚
- [Nonparametric Bayesian Semi-supervised Word Segmentation](http://chasen.org/~daiti-m/paper/tacl2016semiseg.pdf)
	- ä¿®æ­£ç‰ˆã®å›½éš›å­¦ä¼šç‰ˆã§ã™ã€‚ã‚ˆã‚Šè©³ã—ããªã£ã¦ã„ã¾ã™ã€‚
- [æ¡ä»¶ä»˜ãç¢ºç‡å ´ã®ç†è«–ã¨å®Ÿè·µ](http://www.ism.ac.jp/editsec/toukei/pdf/64-2-179.pdf)
	- CRFã®ç†è«–ã‚„å‹¾é…è¨ˆç®—ã«ã¤ã„ã¦éå¸¸ã«è©³ã—ãã¾ã¨ã¾ã£ã¦ã„ã¾ã™ã€‚
- [ãƒ™ã‚¤ã‚ºéšå±¤è¨€èªãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã‚‹æ•™å¸«ãªã—å½¢æ…‹ç´ è§£æ](http://chasen.org/~daiti-m/paper/nl190segment.pdf)
	- NPYLMã®è«–æ–‡ã§ã™ã€‚
	- å»å¹´[è§£èª¬è¨˜äº‹](/2016/12/14/%E3%83%99%E3%82%A4%E3%82%BA%E9%9A%8E%E5%B1%A4%E8%A8%80%E8%AA%9E%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AB%E3%82%88%E3%82%8B%E6%95%99%E5%B8%AB%E3%81%AA%E3%81%97%E5%BD%A2%E6%85%8B%E7%B4%A0%E8%A7%A3%E6%9E%90/)ã‚’æ›¸ãã¾ã—ãŸã€‚

## å®Ÿè£…

ã‚³ã‚¢å®Ÿè£…ã‚’C++14ã§è¡Œã„ã€Boostã§Pythonã‹ã‚‰åˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

[https://github.com/musyoku/python-npycrf](https://github.com/musyoku/python-npycrf)

ã¾ã ç´°ã‹ã„éƒ¨åˆ†ãŒæœªå®Œæˆã§ã™ãŒå­¦ç¿’ã¨å˜èªåˆ†å‰²ã¯ã§ãã¾ã™ã€‚

ã¾ãŸNPYLMã¯ç‰¹è¨±ãŒå–ã‚‰ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã®å®Ÿè£…ã¯ç ”ç©¶ä»¥å¤–ã®ç”¨é€”ã«ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€‚

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">æ­£ã—ã„é€£çµ¡å…ˆãŒåˆ†ã‹ã‚‰ãªã„ã®ã§ã“ã“ã§ï¼šã€Œã”æ³¨æ–‡ã¯æ©Ÿæ¢°å­¦ç¿’ã§ã™ã‹?ã€ã§ç‰¹è¨±ã®ãŸã‚å…¬é–‹ã§ããªã„ã¨ã•ã‚Œã¦ã„ã‚‹NPYLMã®GitHubä¸Šã®å®Ÿè£…ã¯ã€NTTçŸ¥è²¡ã«ç¢ºèªã—ã¦ã‚‚ã‚‰ã£ãŸã¨ã“ã‚ã€Œè©¦é¨“ã¾ãŸã¯ç ”ç©¶ã®ãŸã‚ã®ä½¿ç”¨ã€ã§ã‚ã‚Œã°å…¬é–‹ã—ã¦ã‚‚ã‚ˆã„ãã†ã§ã™ã€‚ä»–ã®æ–¹ã®å®Ÿè£…ã‚‚ã€åŸºæœ¬çš„ã«åŒã˜ã ã¨æ€ã„ã¾ã™ã€‚</p>&mdash; Daichi Mochihashi (@daiti_m) <a href="https://twitter.com/daiti_m/status/851810748263157760?ref_src=twsrc%5Etfw">2017å¹´4æœˆ11æ—¥</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


## NPYLMã¨CRF

NPYLMã¯ã‚»ãƒŸãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã€CRFã¯ãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã«ãªã£ã¦ãŠã‚Šã€å˜èªåˆ†å‰²ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã¾ã™ã€‚

NPYLMã¯å„ãƒãƒ¼ãƒ‰ãŒå˜èªã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚

CRFã¯1ï¼ˆï¼èªé ­ï¼‰ã¨0ï¼ˆï¼ãã‚Œä»¥å¤–ï¼‰ã®2ã¤ãƒ©ãƒ™ãƒ«ã‚’æŒã¡ã¾ã™ã€‚

## è­˜åˆ¥-ç”Ÿæˆçµ±åˆãƒ¢ãƒ‡ãƒ«

NPYCRFã§ã¯JESS-CMæ³•ã‚’ç”¨ã„ã¦ã€å…¥åŠ›æ–‡$\boldsymbol x = x_1x_2 \cdots x_n$ã«å¯¾ã™ã‚‹ãƒ©ãƒ™ãƒ«åˆ—$\boldsymbol y$ã®ç¢ºç‡ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¾ã—ã¾ã™ã€‚

$$
	\begin{align}
		P_{\text{CONC}}(\boldsymbol y \mid \boldsymbol x) \propto P_{\text{CRF}}(\boldsymbol y \mid \boldsymbol x;\boldsymbol \Lambda)P_{\text{NPYLM}}(\boldsymbol y, \boldsymbol x;\boldsymbol \Theta)^{\lambda_0}
	\end{align}\
$$

$P_{\text{CRF}}$ã¯CRFï¼ˆè­˜åˆ¥ãƒ¢ãƒ‡ãƒ«ï¼‰ã€$P_{\text{NPYLM}}$ã¯NPYLMï¼ˆç”Ÿæˆãƒ¢ãƒ‡ãƒ«)ã§ã‚ã‚Šã€$\boldsymbol \Lambda=(\lambda_1, \lambda_2, ..., \lambda_K)$ã¯CRFã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆé‡ã¿ï¼‰ã€$\boldsymbol \Theta$ã¯NPYLMã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆä¸­è¯æ–™ç†åº—éç¨‹ã®å®¢ã®é…ç½®ï¼‰ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚

$\propto$ã¯æ¯”ä¾‹ã‚’æ„å‘³ã—ã¦ã„ã‚‹ã®ã§å¼(1)ã¯ç¢ºç‡ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€$\boldsymbol x$ã«å¯¾ã™ã‚‹å¯èƒ½ãªå…¨ã¦ã®åˆ†å‰²$\boldsymbol y$ã§å¼(1)ã‚’è¨ˆç®—ã—ãŸç·å’Œ$Z(x)^*$ã§å‰²ã‚Œã°ç¢ºç‡ã«ãªã‚‹ãŸã‚ã€å¼(1)ã‚’ç­‰å·ã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã“ã§$\text{log}P_{\text{NPYLM}}(\boldsymbol y, \boldsymbol x;\boldsymbol \Theta)$ã‚’é€£ç¶šå€¤ã‚’è¿”ã™ç´ æ€§é–¢æ•°ã¨ã¿ãªã›ã°ã€å¼(1)ã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿$\boldsymbol \Lambda^*=\lambda_0, \lambda_1, ..., \lambda_K$ã‚’æŒã¤å¯¾æ•°ç·šå½¢ãƒ¢ãƒ‡ãƒ«ã®å½¢ã§æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

$$
	\begin{align}
		P_{\text{CONC}}(\boldsymbol y \mid \boldsymbol x) &\propto \text{exp}
			\left(
					\lambda_0 \text{log}P_{\text{NPYLM}}(\boldsymbol y, \boldsymbol x;\boldsymbol \Theta)
					+
					\sum_{k=1}^K \lambda_k f_k(\boldsymbol y, \boldsymbol x)
			\right)\\
		&= \text{exp}(\boldsymbol \Lambda^* F^*(\boldsymbol y, \boldsymbol x))
	\end{align}\
$$

$f_k$ã¯CRFã®$k$ç•ªç›®ã®ç´ æ€§é–¢æ•°ã§ã™ã€‚

## ãƒ¢ãƒ‡ãƒ«å¤‰æ›

JESS-CMã«ã‚ˆã‚‹ãƒ¢ãƒ‡ãƒ«çµ±åˆã§ã¯ã€è­˜åˆ¥ãƒ¢ãƒ‡ãƒ«ã¨ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ãŒåŒã˜æ§‹é€ ã‚’ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã—ã‹ã—NPYCRFã§ã¯è­˜åˆ¥ãƒ¢ãƒ‡ãƒ«ãŒãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ã®ã«å¯¾ã—ã€ç”Ÿæˆãƒ¢ãƒ‡ãƒ«ãŒã‚»ãƒŸãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€å„ãƒ¢ãƒ‡ãƒ«ã®æƒ…å ±ã‚’ç›´æ¥çµ±åˆã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ã§ã€ä½•ã‚‰ã‹ã®å¤‰æ›å‡¦ç†ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®å¤‰æ›å‡¦ç†ã¯ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆã®NPYCRFã«èª¤ã‚ŠãŒã‚ã‚Šã€ä¿®æ­£ç‰ˆã§æ­£ã—ã„çµ±åˆæ–¹æ³•ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

## ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆã®ãƒ¢ãƒ‡ãƒ«å¤‰æ›

ã“ã“ã‹ã‚‰ã¯NPYLMãŒå˜èªbigramãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹ã¨ã—ã¾ã™ã€‚

æ–‡$\boldsymbol x$ã®$s$ç•ªç›®ã®æ–‡å­—$x_s$ã‹ã‚‰$t$ç•ªç›®ã®æ–‡å­—$x_t$ã¾ã§ã®éƒ¨åˆ†æ–‡å­—åˆ—ã‚’$c_s^t$ã§è¡¨ã—ã¾ã™ã€‚

ã“ã®æ™‚ã€ãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ä¸Šã®$c_s^t$ã«å¯¾å¿œã™ã‚‹åŒºé–“$[s, t)$ã®ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã‚’$\gamma(s, t)$ã¨ãŠãã¨ã€ã“ã‚Œã¯çŠ¶æ…‹1ã§å§‹ã¾ã‚ŠçŠ¶æ…‹1ã§çµ‚ã‚ã‚‹Vå­—å‹ã®åŒºé–“ã«ãªã‚Šã¾ã™ã€‚

ã‚»ãƒŸãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã®å„ãƒãƒ¼ãƒ‰ã®é·ç§»ç¢ºç‡$P(c_t^{u-1} \mid c_s^{t-1})$ã«å¯¾å¿œã™ã‚‹ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã¨ã—ã¦ã€ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆã®NPYCRFã§ã¯

$$
	\begin{align}
		P(c_t^{u-1} \mid c_s^{t-1}) &\propto \text{exp}\left(\gamma(s, t) + \gamma(t, u)\right)
	\end{align}\
$$

ã‚’ç”¨ã„ã¦NPYLMã®å‰å‘ãç¢ºç‡ã‚’

$$
	\begin{align}
		\alpha[t][k] = \sum_{j=1}^{t-k} \text{exp} 
			\left\{ 
				\lambda_0 \text{log}\left( P(c_{t-k+1}^t \mid c_{t-k-j+1}^{t-k}) \right) 
				+ \gamma(t-k-j+1, t-k+1) + \gamma(t-k+1, t+1)
			\right\} \cdot \alpha[t-k][j]
	\end{align}\
$$

ã¨ã—ã¦ã„ã¾ã™ã€‚

$\alpha[t][k]$ã¯ã€ä½ç½®$t$ã‹ã‚‰å·¦ã®æœ€ã‚‚è¿‘ã„å˜èªå¢ƒç•Œã¾ã§ã®è·é›¢ãŒ$k$æ–‡å­—ã§ã‚ã‚‹ç¢ºç‡ã‚’è¡¨ã—ã¦ãŠã‚Šã€ãã‚Œä»¥å‰ã®åˆ†å‰²å…¨ã¦ã«ã¤ã„ã¦å‘¨è¾ºåŒ–ã•ã‚ŒãŸç¢ºç‡ã«ãªã£ã¦ã„ã¾ã™ã€‚

ãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã®å‰å‘ãç¢ºç‡ã®ã‚ˆã†ãªã‚‚ã®ã ã¨è€ƒãˆã¦ãã ã•ã„ã€‚

å¼(5)ã®$\text{exp}(\cdot)$ãŒã€CRFã®æƒ…å ±ã‚’çµ±åˆã—ãŸNPYLMã®ã‚»ãƒŸãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ä¸Šã§ã®é·ç§»ç¢ºç‡ã«ãªã‚Šã¾ã™ã€‚

ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆã®NPYCRFã®èª¤ã‚Šã‚’åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹ãŸã‚ã€ã“ã“ã§ã¯å¯èƒ½ãªå˜èªã®æœ€å¤§é•·ã‚’1ã¨ã—ã¦ã€é•·ã•3æ–‡å­—ã®æ–‡$\boldsymbol x = x_1x_2x_3$ã®å‰å‘ãç¢ºç‡ã‚’æ±‚ã‚ã¦ã¿ã¾ã™ã€‚

ï¼ˆæ–‡é ­ã«\<bos\>ã€æ–‡æœ«ã«\<eos\>ã‚’æŒ¿å…¥ã—ã¦ã„ã¾ã™ï¼‰

å˜èªã®æœ€å¤§é•·ãŒ1ãªã®ã§å‘¨è¾ºåŒ–ã®å‡¦ç†ãŒã„ã‚‰ãªããªã‚Šã€ä»¥ä¸‹ã®ã‚ˆã†ã«å‰å‘ãç¢ºç‡ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

$$
	\begin{align}
		\alpha[1][1] &= \text{exp} \left\{ \lambda_0 \text{log}\left( P(c_1^1 \mid \text{<bos>}) \right) 
						+ \gamma(0, 1) + \gamma(1, 2) \right\}  \nonumber \\
		\alpha[2][1] &= \text{exp} \left\{ \lambda_0 \text{log}\left( P(c_2^2 \mid c_1^1) \right) 
						+ \gamma(1, 2) + \gamma(2, 3) \right\} \cdot  \alpha[1][1] \nonumber \\
		\alpha[3][1] &= \text{exp} \left\{ \lambda_0 \text{log}\left( P(c_3^3 \mid c_2^2) \right) 
						+ \gamma(2, 3) + \gamma(3, 4) \right\} \cdot  \alpha[2][1] \nonumber \\
		\alpha[4][1] &= \text{exp} \left\{ \lambda_0 \text{log}\left( P(<eos> \mid c_3^3) \right) 
						+ \gamma(3, 4) \right\} \cdot  \alpha[3][1]\\
	\end{align}\
$$

å‰å‘ãç¢ºç‡ã®ä¸€ç•ªæœ€å¾Œã®å€¤$\alpha[4][1]$ã¯è¦æ ¼åŒ–å®šæ•°$Z(x)^*$ã«ãªã‚Šã¾ã™ã€‚

ã¾ãŸã“ã®ã‚±ãƒ¼ã‚¹ã§ã¯å¯èƒ½ãªåˆ†å‰²ãŒ1é€šã‚Šã—ã‹å­˜åœ¨ã—ãªã„ãŸã‚ã€

$$
	\begin{align}
		P_{\text{CONC}}(\boldsymbol y \mid \boldsymbol x) &= P_{\text{CRF}}(\boldsymbol y \mid \boldsymbol x;\boldsymbol \Lambda)P_{\text{NPYLM}}(\boldsymbol y, \boldsymbol x;\boldsymbol \Theta)^{\lambda_0} \nonumber \\
		&= Z(x)^* \nonumber \\
		&= \alpha[4][1]
	\end{align}\
$$

ã¨ãªã‚Šã¾ã™ã€‚

å¼(6)ã¨å¼(7)ã‹ã‚‰ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

$$
	\begin{align}
		P_{\text{CONC}}(\boldsymbol y \mid \boldsymbol x) &= \alpha[4][1] \nonumber \\
		&= \text{exp} \left\{ \lambda_0 \text{log}\left( P(<eos> \mid c_3^3) \right) 
						+ \gamma(3, 4) \right\} \cdot  \alpha[3][1] \nonumber \\
		&= \text{exp} \left\{ \lambda_0 \text{log}\left( P(<eos> \mid c_3^3) \right) 
						+ \gamma(3, 4) + \lambda_0 \text{log}\left( P(c_3^3 \mid c_2^2) \right) 
						+ \gamma(2, 3) + \gamma(3, 4) \right\} \cdot  \alpha[2][1] \nonumber \\
		&= \text{exp} \left\{ \lambda_0 \text{log}\left( P(<eos> \mid c_3^3) \right) 
						+ \gamma(3, 4) + \lambda_0 \text{log}\left( P(c_3^3 \mid c_2^2) \right) 
						+ \gamma(2, 3) + \gamma(3, 4) + \lambda_0 \text{log}\left( P(c_2^2 \mid c_1^1) \right) 
						+ \gamma(1, 2) + \gamma(2, 1) + \lambda_0 \text{log}\left( P(c_1^1 \mid \text{<bos>}) \right) 
						+ \gamma(0, 1) + \gamma(1, 2) \right\} \nonumber \\
		&= P(<eos> \mid c_3^3)^{\lambda_0}P(c_3^3 \mid c_2^2)^{\lambda_0}P(c_2^2 \mid c_1^1)^{\lambda_0}P(c_1^1 \mid \text{<bos>})^{\lambda_0} \nonumber \\ 
		&+ \text{exp}(2\gamma(3, 4))
		+ \text{exp}(2\gamma(2, 3))
		+ \text{exp}(2\gamma(1, 2))
		+ \text{exp}(\gamma(0, 1))
	\end{align}\
$$

ä¸€æ–¹ã€ã“ã®ã‚±ãƒ¼ã‚¹ã§å¼(1)ã‚’å±•é–‹ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

$$
	\begin{align}
		P_{\text{CONC}}(\boldsymbol y \mid \boldsymbol x) &ï¼ P_{\text{CRF}}(\boldsymbol y \mid \boldsymbol x;\boldsymbol \Lambda)P_{\text{NPYLM}}(\boldsymbol y, \boldsymbol x;\boldsymbol \Theta)^{\lambda_0} \nonumber \\
		&ï¼ P(<eos> \mid c_3^3)^{\lambda_0}P(c_3^3 \mid c_2^2)^{\lambda_0}P(c_2^2 \mid c_1^1)^{\lambda_0}P(c_1^1 \mid \text{<bos>})^{\lambda_0} \nonumber\\ 
		&+ \text{exp}(\gamma(3, 4))
		+ \text{exp}(\gamma(2, 3))
		+ \text{exp}(\gamma(1, 2))
		+ \text{exp}(\gamma(0, 1))
	\end{align}\
$$

å¼(8)ã¨å¼(9)ã‚’ã‚ˆãè¦‹æ¯”ã¹ã‚‹ã¨ã€å¼(8)ã§ã¯$\gamma$ãŒ2å›å‡ºç¾ã—ã¦ã„ã‚‹ãŸã‚ã€å‰å‘ãç¢ºç‡ã®è¨ˆç®—æ™‚ã«ãƒ¢ãƒ‡ãƒ«ã®çµ±åˆãŒæ­£ã—ãè¡Œã‚ã‚Œã¦ã„ãªã„ã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚

è«–æ–‡ã®ä»¥ä¸‹ã®æ–‡ã¯ã“ã®ã“ã¨ã‚’è¨€ã£ã¦ã„ã¾ã™ã€‚

>Markovãƒ¢ãƒ‡ãƒ«ãŠã‚ˆã³semi-Markovãƒ¢ãƒ‡ãƒ«ãã‚Œãã‚Œã§ç‰¹å®šã®ãƒ‘ã‚¹ä¸Šã®ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ã‚’ãã‚Œãã‚Œä¸€åº¦ãšã¤è¶³ã—ã‚ã‚ã›ãŸå½¢ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã‚ã‚‹ãŒï¼Œ(5) å¼ã®ã‚ˆã†ã«è¶³ã—ã‚ã‚ã›ã¦è¡Œãã¨ï¼Œãã‚Œãã‚Œ Î³(s, t) ãŒäºŒå›ãšã¤ç¾ã‚Œã‚‹ã“ã¨ãŒåˆ†ã‹ã‚‹ï¼ã“ã®åˆ†è§£ã‚’è¦‹ã¦ã‚‚ãƒ¢ãƒ‡ãƒ«ã®çµ±åˆãŒæ­£ã—ããªã„ã“ã¨ãŒç›´æ„Ÿçš„ã«ç†è§£ã§ãã‚‹ï¼

ã“ã®ã‚ˆã†ã«ãƒ¢ãƒ‡ãƒ«çµ±åˆã«èª¤ã‚ŠãŒã‚ã‚‹ãŸã‚ã€ã“ã®ã¾ã¾ã§ã¯å­¦ç¿’ã‚’æ­£ã—ãè¡Œãˆã¾ã›ã‚“ã€‚

## æ­£ã—ã„ãƒ¢ãƒ‡ãƒ«å¤‰æ›

ä¿®æ­£ç‰ˆã®NPYCRFã§ã¯ã€ä»»æ„ã®å…ˆè¡Œå˜èªã‹ã‚‰å˜èª$c_s^{t-1}$ã¸ã®é·ç§»ç¢ºç‡ãŒ$\gamma(s, t)$ã«å¯¾å¿œã—ã¦ã„ã‚‹ã¨è€ƒãˆã¾ã™ã€‚

$$
	\begin{align}
		P(c_s^{t-1} \mid \cdot) = \frac{\text{exp}(\gamma(s, t))}{Z(x)}
	\end{align}\
$$

$Z(x)$ã¯CRFã®è¦æ ¼åŒ–å®šæ•°ï¼ˆå…¨çµŒè·¯ã®ã‚³ã‚¹ãƒˆã®ç·å’Œï¼‰ã§ã™ã€‚

ã•ã‚‰ã«ã€å‰å‘ãç¢ºç‡ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ã—ã¾ã™ã€‚

$$
	\begin{align}
		\alpha[t][k] = \sum_{j=1}^{t-k} \text{exp} 
			\left\{ 
				\lambda_0 \text{log}\left( P(c_{t-k+1}^t \mid c_{t-k-j+1}^{t-k}) \right) 
				+ \gamma(t-k+1, t+1)
			\right\} \cdot \alpha[t-k][j]
	\end{align}\
$$

ã“ã†ã™ã‚‹ã“ã¨ã§å‰å‘ãç¢ºç‡ã‚’çµ‚ç«¯ã¾ã§è¨ˆç®—ã—ãŸæ™‚ã«$P(c_{t-k+1}^t \mid c_{t-k-j+1}^{t-k})$ã¨$\gamma(t-k+1, t+1)$ãŒ1å›ãšã¤å‡ºç¾ã™ã‚‹ãŸã‚ã€ãƒ¢ãƒ‡ãƒ«çµ±åˆã¨ã—ã¦è¾»è¤„ãŒåˆã£ã¦ã„ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚

## CRFã®ç´ æ€§

CRFã®$k$ç•ªç›®ã®ç´ æ€§é–¢æ•°ã‚’$\pi_k(\boldsymbol x, y_{t-1}, y_t)$ã§è¡¨ã—ã¾ã™ã€‚

ç´ æ€§é–¢æ•°ã¯æ–‡å­—åˆ—$\boldsymbol x$ã¨ä½ç½®$t, t-1$ã®CRFã®2å€¤ãƒ©ãƒ™ãƒ«$y_t, y_{t-1}$ãŒç‰¹å®šã®çµ„ã¿åˆã‚ã›ã®æ™‚ã«1ã‚’è¿”ã—ã€ãã†ã§ãªã„å ´åˆã«0ã‚’è¿”ã™é–¢æ•°ã«ãªã£ã¦ã„ã¾ã™ã€‚

NPYLMã§ã¯ä»¥ä¸‹ã®6ç¨®é¡ã®ç´ æ€§ã‚’è€ƒãˆã¾ã™ã€‚

- $t-2, t-1, t, t+1, t+2$ã®ä½ç½®ã®æ–‡å­—unigram
- $t-2, t-1, t, t+1$ã®ä½ç½®ã®æ–‡å­—bigram
- $t-2, t-1, t, t+1$ã®ä½ç½®ã«ã¤ã„ã¦ã€$x_t = x_{t+1}$ã‹ã©ã†ã‹
- $t-3, t-2, t-1, t, t+1$ã®ä½ç½®ã«ã¤ã„ã¦ã€$x_t = x_{t+2}$ã‹ã©ã†ã‹
- $t$ã®ä½ç½®ã®æ–‡å­—ç¨®ã®unigram
- $t$ã®ä½ç½®ã®æ–‡å­—ç¨®ã®bigram

ãŸã¨ãˆã°æ–‡å­—unigramç´ æ€§ã¨ã—ã¦ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒè€ƒãˆã‚‰ã‚Œã¾ã™ã€‚

$$
	\begin{align}
		\pi_k(\boldsymbol x, y_{t-1}, y_t) = 
			\begin{cases}
				1 & x_t\text{ãŒ"ã‚"} \land y_tãŒ1 \land y_{t-1}ãŒ0 \\
				0 & ãã‚Œä»¥å¤–
			\end{cases} \nonumber \\
	\end{align}\
$$

ã¾ãŸã€ä½ç½®$t$ã®ãƒ©ãƒ™ãƒ«$y_t$ã«ã®ã¿ä¾å­˜ã™ã‚‹ç´ æ€§é–¢æ•°$\pi_k(\boldsymbol x, y_t)$ã‚‚ç”¨æ„ã—ã¾ã™ã€‚

ç”¨ã„ã‚‹ç´ æ€§ã®ä¾‹ã‚’ã„ãã¤ã‹æŒ™ã’ã¦ãŠãã¾ã™ã€‚ï¼ˆç´ æ€§ç•ªå·ã¯é©å½“ã§ã™ï¼‰

$$
	\begin{align}
		\pi_{33487}(\boldsymbol x, y_{t-1}, y_t) &= 
			\begin{cases}
				1 & x_{t-1}\text{ãŒ"æ©Ÿ"} \land x_t\text{ãŒ"æ¢°"} \land y_tãŒ1 \land y_{t-1}ãŒ0 \\
				0 & ãã‚Œä»¥å¤–
			\end{cases} \nonumber \\

		\pi_{98}(\boldsymbol x, y_{t-1}, y_t) &= 
			\begin{cases}
				1 & x_{t-1} = x_t \\
				0 & ãã‚Œä»¥å¤–
			\end{cases} \nonumber \\

		\pi_{128734}(\boldsymbol x, y_t) &= 
			\begin{cases}
				1 & \text{type}(x_t) = \text{"ã²ã‚‰ãŒãª"} \\
				0 & ãã‚Œä»¥å¤–
			\end{cases} \nonumber \\
	\end{align}\
$$

å­¦ç¿’æ™‚ã«ã¯ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å„æ–‡ã‹ã‚‰ä¸Šè¨˜6é€šã‚Šã®ç´ æ€§ã‚’å±•é–‹ã—ã€ãã‚Œãã‚Œã®ç´ æ€§é–¢æ•°ã«ã¤ã„ã¦é‡ã¿ã‚’ä¸€ã¤ç”¨æ„ã™ã‚‹ãŸã‚ã€CRFã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ã¯æ•°å„„ã‚’è¶…ãˆã¾ã™ã€‚

åˆ†ã‹ã‚Šã‚„ã™ã•ã®ãŸã‚$\pi_k(\boldsymbol x, y_{t-1}, y_t)$ã¨è¡¨è¨˜ã—ã¾ã—ãŸãŒã€å®Ÿéš›ã¯ãƒ©ãƒ™ãƒ«ã®å€¤$i,j$ã¨ä½ç½®$t$ã‚’åˆ†ã‘ãŸ$\pi_k(\boldsymbol x, i, j, t)$ã®å½¢ã§ç´ æ€§é–¢æ•°ã‚’è€ƒãˆã¾ã™ã€‚

$\boldsymbol x$ã®å„ä½ç½®$t$ã«ã¤ã„ã¦ç´ æ€§é–¢æ•°ã‚’é©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ã‚‰ã§ã™ã€‚

ç§ã¯CRFã‚’å®Ÿè£…ã™ã‚‹ã®ã¯åˆã‚ã¦ãªã®ã§ãƒã‚¦ãƒã‚¦ãªã©ãŒã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«ç´ æ€§IDã‚’è¿”ã™ç´ æ€§é–¢æ•°ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚

```cpp
int index_w_label_u(int y_i){
	int index = y_i;
	return index + _offset_w_label_u;
}
int index_w_label_b(int y_i_1, int y_i){
	int index =  y_i_1 * 2 + y_i;
	return index + _offset_w_label_b;
}
int index_w_unigram_u(int y_i, int i, int x_i){
	int index = x_i * _x_range_unigram * 2 + (i - 1) * 2 + y_i;
	return index + _offset_w_unigram_u;
}
int index_w_unigram_b(int y_i_1, int y_i, int i, int x_i){
	int index = x_i * _x_range_unigram * 2 * 2 + (i - 1) * 2 * 2 + y_i * 2 + y_i_1;
	return index + _offset_w_unigram_b;
}
int index_w_bigram_u(int y_i, int i, int x_i_1, int x_i){
	int index = x_i * _num_character_ids * _x_range_bigram * 2 + x_i_1 * _x_range_bigram * 2 + (i - 1) * 2 + y_i;
	return index + _offset_w_bigram_u;
}
int index_w_bigram_b(int y_i_1, int y_i, int i, int x_i_1, int x_i){
	int index = x_i * _num_character_ids * _x_range_bigram * 2 * 2 + x_i_1 * _x_range_bigram * 2 * 2 + (i - 1) * 2 * 2 + y_i * 2 + y_i_1;
	return index + _offset_w_bigram_b;
}
int index_w_identical_1_u(int y_i, int i){
	int index = (i - 1) * 2 + y_i;
	return index + _offset_w_identical_1_u;
}
int index_w_identical_1_b(int y_i_1, int y_i, int i){
	int index = (i - 1) * 2 * 2 + y_i * 2 + y_i_1;
	return index + _offset_w_identical_1_b;
}
int index_w_identical_2_u(int y_i, int i){
	int index = (i - 1) * 2 + y_i;
	return index + _offset_w_identical_2_u;
}
int index_w_identical_2_b(int y_i_1, int y_i, int i){
	int index = (i - 1) * 2 * 2 + y_i * 2 + y_i_1;
	return index + _offset_w_identical_2_b;
}
int index_w_unigram_type_u(int y_i, int type_i){
	int index = type_i * 2 + y_i;
	return index + _offset_w_unigram_type_u;
}
int index_w_unigram_type_b(int y_i_1, int y_i, int type_i){
	int index = type_i * 2 * 2 + y_i * 2 + y_i_1;
	return index + _offset_w_unigram_type_b;
}
int index_w_bigram_type_u(int y_i, int type_i_1, int type_i){
	int index = type_i * _num_character_types * 2 + type_i_1 * 2 + y_i;
	return index + _offset_w_bigram_type_u;
}
int index_w_bigram_type_b(int y_i_1, int y_i, int type_i_1, int type_i){
	int index = type_i * _num_character_types * 2 * 2 + type_i_1 * 2 * 2 + y_i * 2 + y_i_1;
	return index + _offset_w_bigram_type_b;
}
```

åŒã˜IDã‚’é•ã†ç´ æ€§é–¢æ•°ãŒè¿”ã•ãªã„ã‚ˆã†ã«ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’ä¸ãˆã¦ã„ã¾ã™ã€‚

ã“ã†ã™ã‚‹ã“ã¨ã§$\boldsymbol \Lambda$ã‚’1ã¤ã®å·¨å¤§ãªãƒ™ã‚¯ãƒˆãƒ«ã¨ã—ã¦å®Ÿè£…ã§ãã€ç´ æ€§ID$k$ã‹ã‚‰$\lambda_k$ã‚’å¼•ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

å®Ÿéš›ã€å­¦ç¿’æ™‚ã«$\boldsymbol \Lambda$ã¯æ•°å„„æ¬¡å…ƒã®å·¨å¤§ãªãƒ™ã‚¯ãƒˆãƒ«ã«ãªã‚‹ãŸã‚ã€æ•°GBã®ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã—ã¾ã™ã€‚

å­¦ç¿’å®Œäº†å¾Œã®æ¨è«–æ™‚ã«ã¯ä¸è¦ãªé‡ã¿ã‚’æåˆˆã‚Šã—åœ§ç¸®ã™ã‚‹ã“ã¨ã§æ•°åMBã¾ã§å°ã•ããªã‚Šã¾ã™ã€‚

## å‘¨è¾ºç¢ºç‡ã®è¨ˆç®—

ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆã®NPYCRFã§ã¯ã‚»ãƒŸãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã®ãƒãƒ¼ãƒ‰é–“ã®é·ç§»ç¢ºç‡ã‚’CRFã®ãƒ‘ã‚¹ã®ã‚³ã‚¹ãƒˆã«å¤‰æ›ã—ã¦CRFã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€CRFã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å‹¾é…è¨ˆç®—ã«ã¯ã€å„ç´ æ€§ã®æ–‡å­—åˆ—ä¸Šã®å„ä½ç½®ã§ã®ç™ºç«ã®æœŸå¾…å€¤ã•ãˆæ±‚ã‚ã‚Œã°å……åˆ†ã§ã‚ã‚‹ãŸã‚ã€NPYLMã®æƒ…å ±ã‚’ãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›ã›ãšã«ç›´æ¥CRFã®å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ç´ æ€§é–¢æ•°$\pi_k$ã«å¯¾å¿œã™ã‚‹é‡ã¿$\lambda_k$ã®ã€å¯¾æ•°å°¤åº¦$\cal{L}(\boldsymbol x, \boldsymbol y)$ã«å¯¾ã™ã‚‹å‹¾é…ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚

$$
	\begin{align}
		\frac{\partial \cal{L}(\boldsymbol x, \boldsymbol y)}{\partial \lambda_k} = 
			\sum_{t=1}^N \left\{ 
					\pi_k(\boldsymbol x, y_t, y_{t+1}, t + 1) - \sum_{i \in \{0,1\}}\sum_{j \in \{0,1\}}P(y_t=i, y_{t+1}=j \mid \boldsymbol x) \pi_k(\boldsymbol x, i, j, t + 1)
				\right\}
	\end{align}\
$$

$P(y_t=i, y_{t+1}=j \mid \boldsymbol x)$ã¯ã€ä¸ãˆã‚‰ã‚ŒãŸ$\boldsymbol x$ã«å¯¾ã—ã¦ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«ã§ãƒ©ãƒ™ãƒ«ã‚’äºˆæ¸¬ã—ãŸæ™‚ã€ä½ç½®$t$ã®ãƒ©ãƒ™ãƒ«ãŒ$i$ã§ä½ç½®$t+1$ã®ãƒ©ãƒ™ãƒ«ãŒ$j$ã«ãªã‚‹ç¢ºç‡ï¼ˆå‘¨è¾ºç¢ºç‡ï¼‰ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚

ãã®ãŸã‚ã€å„$m, i, j$ã«ã¤ã„ã¦$P(y_t=i, y_{t+1}=j \mid \boldsymbol x)$ãŒè¨ˆç®—ã§ãã‚Œã°$\lambda_0$ã®å‹¾é…ã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### å˜èªã®å‘¨è¾ºç¢ºç‡

$P(y_t=i, y_{t+1}=j \mid \boldsymbol x)$ã‚’æ±‚ã‚ã‚‹ã«ã¯ã€ã¾ãšå˜èªã®å‘¨è¾ºç¢ºç‡ã‚’æ±‚ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãšã€$c_{t-k-j+1}^{t-k}$ã‹ã‚‰$c_{t-k+1}^t$ã¸ã®é·ç§»ã‚’è€ƒãˆã‚‹ã¨ã€ã“ã®å‘¨è¾ºç¢ºç‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ã•ã‚Œã¾ã™ã€‚

$$
	\begin{align}
		P(c_{t-k-j+1}^{t-k},  c_{t-k+1}^t \mid \boldsymbol x) = 
		\frac {
			\alpha[t-k][j] \cdot \beta[t][k] \cdot \text{exp}\left[ \lambda_0 \text{log}\left(P(c_{t-k-j+1}^{t-k} \mid c_{t-k+1}^t)\right) + \gamma(t-k+1, t+1)\right]
		}{
			Z(x)^*
		}
	\end{align}\
$$

$\beta[t][k]$ã¯ä»¥ä¸‹ã§è¡¨ã•ã‚Œã‚‹å¾Œå‘ãç¢ºç‡ã§ã™ã€‚

$$
	\begin{align}
		\beta[t][k] = \sum_{j=1}^{N-t} \text{exp}\left[
				\lambda_0 \text{log}\left(P(c_{t+1}^{t+j} \mid c_{t-k+1}^t)\right) + \gamma(t+1, t+j+1)
			\right] \cdot \beta[t+j][j]
	\end{align}\
$$

å¼(13)ã‹ã‚‰å˜èªã®å‘¨è¾ºç¢ºç‡ã‚’æ±‚ã‚ã¾ã™ã€‚

$$
	\begin{align}
		P_{\text{CONC}}(c_{t-k+1}^t \mid \boldsymbol x) &= \sum_{j} P(c_{t-k-j+1}^{t-k},  c_{t-k+1}^t \mid \boldsymbol x)  \nonumber \\
		&= \sum_{j} \frac {
				\alpha[t-k][j] \cdot \beta[t][k] \cdot \text{exp}\left[ \lambda_0 \text{log}\left(P(c_{t-k-j+1}^{t-k} \mid c_{t-k+1}^t)\right) + \gamma(t-k+1, t+1)\right]
			}{
				Z(x)^*
			} \nonumber \\
		&= \frac{\beta[t][k]}{Z(x)^*} \sum_{j} \alpha[t-k][j] \cdot \beta[t][k] \cdot \text{exp}\left[ \lambda_0 \text{log}\left(P(c_{t-k-j+1}^{t-k} \mid c_{t-k+1}^t)\right) + \gamma(t-k+1, t+1)\right] \nonumber \\
		&= \frac{\alpha[t][k] \cdot \beta[t][k]}{Z(x)^*} 
	\end{align}\
$$

ã“ã®å¼(15)ã‚’ç”¨ã„ã¦$P(y_t=i, y_{t+1}=j \mid \boldsymbol x)$ã®å„ãƒ©ãƒ™ãƒ«$i,j$ã®çµ„ã¿åˆã‚ã›ï¼ˆ`1-1`ã€`1-0`ã€`0-1`ã€`0-0`ã®4é€šã‚Šï¼‰ã«ã¤ã„ã¦å‘¨è¾ºç¢ºç‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚

### `1-1`ã®å ´åˆ

$y_t=1, y_{t+1}=1$ã¨ãªã‚‹ã‚±ãƒ¼ã‚¹ã¯$c_t^t$ãŒå˜èªã«ãªã‚‹ãŸã‚ã€å‘¨è¾ºç¢ºç‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã¾ã™ã€‚

$$
	\begin{align}
		P(y_t=1, y_{t+1}=1 \mid \boldsymbol x) = P_{\text{CONC}}(c_t^t \mid \boldsymbol x)
	\end{align}\
$$

### `1-0`ã®å ´åˆ

$y_{t}=1, y_{t+1}=0$ã¨ãªã‚‹ã‚±ãƒ¼ã‚¹ã¯ã€ä½ç½®$t$ã‹ã‚‰ä»»æ„ã®é•·ã•ã®å˜èªãŒå§‹ã¾ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã‚‹ãŸã‚ã€å‘¨è¾ºç¢ºç‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã¾ã™ã€‚

$$
	\begin{align}
		P(y_t=1, y_{t+1}=0 \mid \boldsymbol x) 
		&= \sum_{j=2} P(y_t=1, y_{t+1}=0, ..., y_{t+j}=1 \mid \boldsymbol x) \nonumber \\
		&= \sum_{j=1} P_{\text{CONC}}(c_t^{t+j} \mid \boldsymbol x)
	\end{align}\
$$

ãŸã ã—$...$ã®ç¯„å›²ã®ãƒ©ãƒ™ãƒ«ã®å€¤ã¯ã™ã¹ã¦$0$ã§ã™ã€‚

### `0-1`ã®å ´åˆ

$y_{t}=0, y_{t+1}=1$ã¨ãªã‚‹ã‚±ãƒ¼ã‚¹ã¯ã€ä»»æ„ã®é•·ã•ã®å˜èªãŒä½ç½®$t$ã§çµ‚äº†ã—ã€ ä½ç½®$t+1$ã‹ã‚‰æ–°ã—ã„å˜èªãŒå§‹ã¾ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã‚‹ãŸã‚ã€å‘¨è¾ºç¢ºç‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã¾ã™ã€‚

$$
	\begin{align}
		P(y_t=0, y_{t+1}=1 \mid \boldsymbol x) 
		&= \sum_{j=1} P(y_{t-j}=1, ...,  y_{t}=0, y_{t+1}=1 \mid \boldsymbol x) \nonumber \\
		&= \sum_{j=1} P_{\text{CONC}}(c_{t-j}^{t} \mid \boldsymbol x)
	\end{align}\
$$

### `0-0`ã®å ´åˆ

$y_{t}=0, y_{t+1}=0$ã¨ãªã‚‹ã‚±ãƒ¼ã‚¹ã¯ã€ä½ç½®$t$ã¨ä½ç½®$t+1$ãŒã¨ã‚‚ã«å˜èªã®é€”ä¸­ã§ã‚ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã‚‹ãŸã‚ã€å‘¨è¾ºç¢ºç‡ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã¾ã™ã€‚

$$
	\begin{align}
		P(y_t=0, y_{t+1}=0 \mid \boldsymbol x) 
		&= \sum_{j=1}\sum_{k=2} P(y_{t-j}=1, ...,  y_{t}=0, y_{t+1}=0, ..., y_{t+k} \mid \boldsymbol x) \nonumber \\
		&= \sum_{j=1}\sum_{k=1} P_{\text{CONC}}(c_{t-j}^{t+k} \mid \boldsymbol x)
	\end{align}\
$$

ãŸã ã—ã€$P(y_t=i, y_{t+1}=j \mid \boldsymbol x)$ã®å„ãƒ©ãƒ™ãƒ«$i,j$ã®çµ„ã¿åˆã‚ã›ã¯4é€šã‚Šã—ã‹å­˜åœ¨ã—ãªã„ãŸã‚ã€`1-1`ã€`1-0`ã€`0-1`ã®ã‚±ãƒ¼ã‚¹ã‚’æ±‚ã‚ã‚Œã°`0-0`ã®ã‚±ãƒ¼ã‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

$$
	\begin{align}
		P(y_t=0, y_{t+1}=0 \mid \boldsymbol x) = 1 - P(y_t=1, y_{t+1}=1 \mid \boldsymbol x) - P(y_t=1, y_{t+1}=0 \mid \boldsymbol x) - P(y_t=0, y_{t+1}=1 \mid \boldsymbol x)
	\end{align}\
$$

### trigramã®å ´åˆ

ã“ã“ã¾ã§ã¯ã‚»ãƒŸãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã®ãƒãƒ¼ãƒ‰ã®é·ç§»ç¢ºç‡ã‚’å˜èªbigramç¢ºç‡ã§è€ƒãˆã¦ãã¾ã—ãŸãŒã€å®Ÿéš›ã¯ç²¾åº¦é¢ã‹ã‚‰NPYLMã‚’trigramã«ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚



### å®Ÿè£…

```cpp
void enumerate_marginal_p_path_given_sentence_using_p_substring(py_x, sentence_length, pc_x){
	py_x(0, 0, 0) = 0;
	py_x(0, 0, 1) = 0;
	py_x(0, 1, 0) = 0;
	py_x(0, 1, 1) = 1;
	for(t = 1;t <= sentence_length;t++){
		py_x(t, 1, 1) = compute_p_z_case_1_1(sentence_length, t, pc_x);
		py_x(t, 1, 0) = compute_p_z_case_1_0(sentence_length, t, pc_x);
		py_x(t, 0, 1) = compute_p_z_case_0_1(sentence_length, t, pc_x);
		py_x(t, 0, 0) = std::max(0.0, 1.0 - py_x(t, 1, 1) - py_x(t, 1, 0) - py_x(t, 0, 1));
	}
}
double compute_p_z_case_1_1(sentence_length, t, pc_x){
	return pc_x(t, 1);
}
double compute_p_z_case_1_0(sentence_length, t, pc_x){
	if(t == sentence_length){
		return 0;
	}
	double p_1_0 = 0;
	for(int j = 2;j <= std::min(sentence_length - t + 1, _max_word_length);j++){
		p_1_0 += pc_x(t + j - 1, j);
	}
	return p_1_0;
}
double compute_p_z_case_0_1(sentence_length, t, pc_x){
	double p_0_1 = 0;
	for(int j = 2;j <= std::min(t, _max_word_length);j++){
		p_0_1 += pc_x(t, j);
	}
	return p_0_1;
}
double compute_p_z_case_0_0(sentence_length, t, pc_x){
	if(t == 1){
		return 0;
	}
	double p_0_0 = 0;
	for(int k = 1;k <= std::min(sentence_length - t, _max_word_length - 2);k++){
		for(int j = k + 2;j <= std::min(t + k, _max_word_length);j++){
			p_0_0 += pc_x(t + k, j);
		}
	}
	return p_0_0;
}
```

å®Ÿè£…æ™‚ã«ã¯`0-0`ã®ã‚±ãƒ¼ã‚¹ã‚‚å¼(19)ã«å¾“ã£ã¦è¨ˆç®—ã—ã€å¼(20)ã®çµæœã¨ä¸€è‡´ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºã‹ã‚ã¾ã—ã‚‡ã†ã€‚

## $\lambda_0$ã®å‹¾é…è¨ˆç®—

$(\lambda_1,...,\lambda_K)$ã¯CRFã®ç´ æ€§ã«å¯¾ã™ã‚‹é‡ã¿ãªã®ã§ä¸Šè¿°ã®æ–¹æ³•ã§å‹¾é…ã‚’è¨ˆç®—ã§ãã¾ã™ãŒã€$\lambda_0$ã¯å˜èªbigramï¼ˆã¾ãŸã¯trigramï¼‰ã«å¯¾ã™ã‚‹ç´ æ€§ã§ã‚ã‚‹ãŸã‚ã€å‹¾é…ã®è¨ˆç®—æ–¹æ³•ãŒç‰¹æ®Šã§ã™ã€‚

åŸºæœ¬çš„ã«ã¯å¼(12)ã¨åŒæ§˜ã€ç´ æ€§é–¢æ•°ã®å€¤ã‹ã‚‰ç™ºç«ã®æœŸå¾…å€¤ã‚’å¼•ãã¨å‹¾é…ã‚’è¨ˆç®—ã§ãã‚‹ãŸã‚ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ±‚ã‚ã¾ã™ã€‚

$$
	\begin{align}
		\frac{\partial \cal{L}(\boldsymbol x, \boldsymbol y)}{\partial \lambda_0} = 
			\sum_{\{s, t, u\} \in \boldsymbol y} \left\{ 
					\text{log}\left( P(c_t^{u-1} \mid c_s^{t-1}) \right)
				\right\}
			- \sum_{t=1}^N \sum_{k=1}^{t} \sum_{j=1}^{t-k} P_{\text{CONC}}(c_{t-k+1}^{t}, c_{t-k-j+1}^{t-k} \mid \boldsymbol x)
				\text{log}\left( P(c_{t-k+1}^{t} \mid c_{t-k-j+1}^{t-k}) \right)
	\end{align}\
$$

ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```cpp
void backward_lambda_0(p_conc, pw_h, max_word_length){
	// ç´ æ€§ã®ç™ºç«
	for(int n = 1;n <= num_words;n++){
		int t, k, j = ...
		_grad_lambda_0 += log(pw_h(t, k, j));
	}

	// ç™ºç«ã®æœŸå¾…å€¤ã‚’å¼•ã
	for(int t = 1;t <= num_characters;t++){
		for(int k = 1;k <= min(t, max_word_length);k++){
			for(int j = (t - k == 0) ? 0 : 1;j <= min(t - k, max_word_length);j++){
				_grad_lambda_0 -= p_conc(t, k, j) * log(pw_h(t, k, j));
			}
		}
	}
}
```

trigramã®å ´åˆã¯å˜ç´”ã«ç™ºç«ã®æœŸå¾…å€¤ã®éƒ¨åˆ†ã®ãƒ«ãƒ¼ãƒ—ãŒã‚‚ã†ä¸€ã¤å¢—ãˆã‚‹ã ã‘ã§ã™ã€‚

## ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°

å‰å‘ãç¢ºç‡ã¨å¾Œã‚å‘ãç¢ºç‡ã¯ã€å®Ÿéš›ã«ã¯é•·ã„ç³»åˆ—ã§ã‚¢ãƒ³ãƒ€ãƒ¼ãƒ•ãƒ­ãƒ¼ã‚’èµ·ã“ã™å•é¡ŒãŒã‚ã‚‹ãŸã‚ã€å¼ã®ã¾ã¾è¨ˆç®—ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

ï¼ˆç§ã®çµŒé¨“ä¸Šã€$\boldsymbol x$ãŒ100æ–‡å­—ã‚’è¶…ãˆã‚‹ã¨å±ãªãã€200æ–‡å­—ã‚’è¶…ãˆã‚‹ã¨ç¢ºå®Ÿã«ã‚¢ãƒ³ãƒ€ãƒ¼ãƒ•ãƒ­ãƒ¼ã‚’èµ·ã“ã—ã¾ã™ï¼‰

ä¸€èˆ¬ã«ãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã®å ´åˆã¯ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°ã‚’ç”¨ã„ã¦å„æ™‚åˆ»ã®å‰å‘ãç¢ºç‡ãƒ»å¾Œã‚å‘ãç¢ºç‡ã‚’ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ã‚¢ãƒ³ãƒ€ãƒ¼ãƒ•ãƒ­ãƒ¼ã«å¯¾å‡¦ã—ã¾ã™ã€‚

ä»Šå›ã¯ã‚»ãƒŸãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ãªã®ã§ã™ãŒã€ãƒãƒ«ã‚³ãƒ•ãƒ¢ãƒ‡ãƒ«ã¨åŒæ§˜ã«ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°ã‚’æ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã«ã¤ã„ã¦ã¯ä»¥å‰ã«[è§£èª¬è¨˜äº‹](/2017/12/10/semi-markov-model/)ã‚’æ›¸ã„ã¦ã„ã‚‹ã®ã§è©³ç´°ã‚’ã“ã“ã§ã¯æ›¸ãã¾ã›ã‚“ãŒã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã—ã¾ã™ã€‚

$$
	\begin{align}
		c[t] = P(x_t \mid x_1x_2 \cdots x_{t-1})
	\end{align}\
$$

ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã•ã‚ŒãŸå‰å‘ãç¢ºç‡$\bar{\alpha}[t-k][j]$ã‹ã‚‰$\hat{\alpha}[t][k]$ã‚’è¨ˆç®—ã—ã€

$$
	\begin{align}
		\hat{\alpha}[t][k] = \sum_{j=1}^{t-k} \pi(q_t = k \mid q_{t-k}=j)\bar{\alpha}[t-k][j]\frac {1} {\prod_{m=t-k+1}^{t-1} c[m]}
	\end{align}\
$$

ä½ç½®$t$ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°ã‚’æ±‚ã‚ã€

$$
	\begin{align}
		c[t] = \sum_k \hat{\alpha}[t][k]
	\end{align}\
$$

ä½ç½®$t$ã®å‰å‘ãç¢ºç‡ã‚’ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã—ã¾ã™ã€‚

$$
	\begin{align}
		\bar{\alpha}[t][k] = \frac {\hat{\alpha}[t][k]} {c[t]}
	\end{align}\
$$

å¾Œå‘ãç¢ºç‡ã¯å‰å‘ãç¢ºç‡ã®è¨ˆç®—æ™‚ã«æ±‚ã‚ãŸã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°ã‚’ãã®ã¾ã¾ç”¨ã„ã¦ä»¥ä¸‹ã®ã‚ˆã†ã«è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

$$
	\begin{align}
		\bar{\beta}[t][k] = \sum_{j=1}^{n-t} \pi(q_{t+j} = j \mid q_t=k) \cdot \bar{\beta}[t+j][j] \cdot 
			\frac {1} {\prod_{m=t+1}^{t+j} c[m]}
	\end{align}\
$$

ã•ã‚‰ã«ã€ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°ã¯å˜èªåˆ†å‰²ã§å‘¨è¾ºåŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€è¦æ ¼åŒ–å®šæ•°ã‚’è¨ˆç®—ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

$$
	\begin{align}
		Z(\boldsymbol x)^* = \prod_{t=1}^N c[t]
	\end{align}\
$$

ã“ã®ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ä¿‚æ•°ã‚’ç”¨ã„ã‚‹ã¨ã€CRFã®å‘¨è¾ºç¢ºç‡ã®è¨ˆç®—ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ãç›´ã™ã“ã¨ãŒã§ãã¾ã™ã€‚

## ãŠã‚ã‚Šã«

æ™‚é–“ãŒååˆ†ã«å–ã‚Œãªã‹ã£ãŸã®ã§ãƒ¢ãƒ‡ãƒ«ã®æŒ¯ã‚‹èˆã„ã®è§£æãªã©ãŒã¾ã ã§ãã¦ã„ã¾ã›ã‚“ã€‚

NPYLMã§ã¯åˆ†å‰²ã§ãã‚‹æœªçŸ¥èªãŒNPYCRFã§ã¯åˆ†å‰²ã§ããªã„ã“ã¨ã‚‚ã‚ã‚Šã€ãã‚‚ãã‚‚çµ±åˆãƒ¢ãƒ‡ãƒ«ä¸Šã®NPYLMãŒå­¦ç¿’ã«æˆåŠŸã—ã¦ã„ã‚‹ã®ã‹ã©ã†ã‹ãªã©ã‚’ä»Šå¾Œèª¿ã¹ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">NPYCRFã‚’å®Ÿè£…ã—ã‚ˆã†ã¨æ€ã£ã¦æŒæ©‹å…ˆç”Ÿã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’èª­ã‚“ã§ã„ãŸã‚‰ã€æœ¬æ¥é›£ã—ã„ã€Œãƒªãƒªã‚«ãƒ«ãªã®ã¯ã€ã®å½¢æ…‹ç´ è§£æã‚‚æ•™å¸«ãªã—ã§é©åˆ‡ãªå˜èªåˆ†å‰²ãŒå­¦ç¿’ã§ãã‚‹ã¨ã®ã“ã¨ãªã®ã§ã€å®Ÿè£…ã—ãŸã‚‰ã“ã®ãƒ„ã‚¤ãƒ¼ãƒˆã®å˜èªåˆ†å‰²ã‚’ã‚„ã£ã¦ã¿ãŸã„ã€‚<a href="https://t.co/tVTEnCHGbt">https://t.co/tVTEnCHGbt</a> <a href="https://t.co/wJFlqSkAp3">https://t.co/wJFlqSkAp3</a></p>&mdash; ğŸ’¥ (@musyokudon) <a href="https://twitter.com/musyokudon/status/867416782436315136?ref_src=twsrc%5Etfw">2017å¹´5æœˆ24æ—¥</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">å½¢æ…‹ç´ è§£æãŒé›£ã—ã„ã®ã«ã¯ãªã®ã¯ã®ã»ã‹ã«ã¯ãŒãªã„ã¨ã‹ãŒã‚’ã‚‰ã‚Œã¨ã‹ãŒã‚ã‚Šã“ã‚Œã‚‰ã¯ã¯ã«ã¯ã«ã‚„ã‘ã‚ˆã‚Šãªã‹ã‚‰ã®ä¼çµ±ã ãã†ã§ã™ã€‚</p>&mdash; asaokitan (@asaokitan) <a href="https://twitter.com/asaokitan/status/502100435184787458?ref_src=twsrc%5Etfw">2014å¹´8æœˆ20æ—¥</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-conversation="none" data-lang="ja"><p lang="ja" dir="ltr">ãŸã—ã‹ã«æ•™å¸«ãªã—ï¼ˆNPYLMï¼‰ã ã¨ã†ã¾ãã„ã£ãŸã€‚æ•™å¸«ä»˜ããƒ‡ãƒ¼ã‚¿ï¼ˆwikipediaã‚³ãƒ¼ãƒ‘ã‚¹ï¼‰ã‚‚ä½¿ã†ã¨ãã‚Œã«å¼•ã£å¼µã‚‰ã‚Œã‚‹ã®ã‹ã†ã¾ãã„ã‹ãªã„ï¼ˆNPYCRFï¼‰ã€‚ã“ã®ã‚ãŸã‚Šã®ãƒãƒ©ãƒ³ã‚¹ã¯ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã§ã©ã†ã«ã‹ãªã‚‹å•é¡Œãªã®ã ã‚ã†ã‹ã€‚ <a href="https://t.co/isYwPDKvtB">pic.twitter.com/isYwPDKvtB</a></p>&mdash; ğŸ’¥ (@musyokudon) <a href="https://twitter.com/musyokudon/status/940171775261908992?ref_src=twsrc%5Etfw">2017å¹´12æœˆ11æ—¥</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">NPYCRFã§ã¯å­¦ç¿’ã—ãŸè£œå®Œé‡ã¿ãŒä¸€å®šãªã®ã§ã€å¿…ãšã—ã‚‚ä¸Šæ‰‹ãè¡Œã‹ãªã„å ´åˆã‚‚ã‚ã‚‹ã¯ãšã§ã™ã€‚ã“ã®å ´åˆä½•ã‚’ã™ã‚Œã°ã‚ˆã„ã‹ã¯NPYCRFã®è«–æ–‡ã®æœ€å¾Œã«æ›¸ã„ã¦ã‚ã‚‹é€šã‚Šã§æ˜ç¢ºãªã®ã§ã™ãŒã€ç§ã¯ä»–ã«ã‚„ã‚‹ã“ã¨ãŒå¤šã„ã®ã§ã€èª°ã‹ã§ãã‚‹äººã‚’å¾…ã£ã¦ã„ã‚‹æ„Ÿã˜ã§ã—ã‚‡ã†ã‹ã€‚</p>&mdash; Daichi Mochihashi (@daiti_m) <a href="https://twitter.com/daiti_m/status/940656603216347137?ref_src=twsrc%5Etfw">2017å¹´12æœˆ12æ—¥</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


ä½™è«‡ã§ã™ãŒMeCabé–‹ç™ºè€…ã®å·¥è—¤æ°ã«ã‚ˆã‚‹ã€Œå½¢æ…‹ç´ è§£æãƒ»æ§‹æ–‡è§£æã®ç†è«–ã¨å®Ÿè£…ã€ã¨ã„ã†æœ¬ãŒç™ºå£²ã•ã‚Œã‚‹ãã†ã§ã™ã€‚

æ¥½ã—ã¿ã§ã™ã­ã€‚

<blockquote class="twitter-tweet" data-lang="ja"><p lang="und" dir="ltr"><a href="https://t.co/DxvPbp8LhA">pic.twitter.com/DxvPbp8LhA</a></p>&mdash; Manabu Sassano (@sassano) <a href="https://twitter.com/sassano/status/940586222166011904?ref_src=twsrc%5Etfw">2017å¹´12æœˆ12æ—¥</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote class="twitter-tweet" data-lang="ja"><p lang="ja" dir="ltr">ã‚ˆã†ã‚„ãä¸€å†Šã¾ã‚‹ã¾ã‚‹å½¢æ…‹ç´ è§£æã¨ã„ã†ç‹‚æ°—ã˜ã¿ãŸæœ¬ã®åˆç¨¿ãŒã§ããŸã€‚ã“ã‚Œã‹ã‚‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã™ã€‚èª­ã‚“ã§ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãã ã•ã‚‹æ–¹DMãã ã•ã„ã€‚ã”é£¯ãŠã”ã‚Šã¾ã™ã€‚</p>&mdash; Taku Kudo (@taku910) <a href="https://twitter.com/taku910/status/940116830957346816?ref_src=twsrc%5Etfw">2017å¹´12æœˆ11æ—¥</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
